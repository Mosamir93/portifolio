{% extends "base.html" %}

{% block content %}
<h1>Search Results for "{{ search_term }}"</h1>
<!-- Add the search form at the top -->
<script src="{{ url_for('static', filename='js/search_history.js') }}"></script>
<form action="{{ url_for('search') }}" method="post" class="mb-4">
    <div class="input-group">
        <input type="text" name="search_term" class="form-control" value="{{ search_term }}" placeholder="Search for products..." required>
        <div class="input-group-append">
            <button class="btn btn-primary" type="submit">Search</button>
        </div>
    </div>
    <div id="searchHistoryContainer" class="search-history-container"></div>
</form>
{% if no_results %}
    <div class="alert alert-warning" role="alert">
        No results found for "{{ search_term }}".
    </div>
{% else %}
<div class="d-flex flex-wrap">
    {% for result in results %}
    <div class="col-md-4 product-card">
        <div class="card">
            <img src="{{ result.img_url }}" alt="{{ result.name }}" class="card-img-top product-img">
            <div class="card-body text-center">
                <div class="product-name">{{ result.name }}</div>
                <div class="product-price">{{ result.price }}</div>
                <div class="vendor-name">{{ result.vendor }}</div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
<a href="/">Back to Search</a>
{% endblock %}
